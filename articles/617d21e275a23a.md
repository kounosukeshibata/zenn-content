---
title: "Dockerãƒãƒ¼ãƒˆ"
emoji: "ğŸ§‘â€ğŸ’»"
type: "tech"
topics:
  - "docker"
  - "linux"
  - "ã‚³ãƒ³ãƒ†ãƒŠ"
  - "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯"
  - "é§†ã‘å‡ºã—ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢"
published: true
published_at: "2024-12-28 01:41"
---

# ã¯ã˜ã‚ã«

Docker ãŒè‹¦æ‰‹ã ã£ãŸãŸã‚å­¦ç¿’ã—ãŸã€‚Docker ã§ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰ã‚’å‚™å¿˜éŒ²ã®ãŸã‚è¨˜è¼‰ã€‚

# åŸºç¤äº‹é …ã‚„åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰

## ã‚·ã‚§ãƒ«ã¨ã‚«ãƒ¼ãƒãƒ«ã®å½¹å‰²

- ã‚«ãƒ¼ãƒãƒ«ï¼šPC ä¸Šã§å”¯ä¸€ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã¨ä¼šè©±ã§ãã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢
- ã‚·ã‚§ãƒ«ï¼šãƒ’ãƒ¥ãƒ¼ãƒãƒ³ã®å…¥åŠ›å€¤ã‚’ã€ã‚·ã‚§ãƒ«è¨€èªã‚’é€šã˜ã¦ã‚«ãƒ¼ãƒãƒ«ã«ç¿»è¨³ã—ã¦ä¼é”ã™ã‚‹ã‚‚ã®

ã‚·ã‚§ãƒ«ã® STDIN ã¨ STDOUT ã‚’ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ç¹‹ã’ã‚‹ã“ã¨ã‚’ã€ŒTTY ã‚’ã‚¢ã‚¿ãƒƒãƒã™ã‚‹ã€ã¨ã„ã†ã€‚
â†’TTY ã‚’ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ã‚¢ã‚¿ãƒƒãƒã™ã‚‹ã“ã¨ã§ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’ä½¿ã£ã¦ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã¨ä¼šè©±ã§ãã‚‹ã€‚

ãƒ‰ãƒƒã‚«ãƒ¼ã®ä¸­ã«ã‚·ã‚§ãƒ«ã§å…¥ã‚‹æ™‚ã¯æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†

```Docker
docker exec --interactive --tty
```

## ã‚·ã‚§ãƒ«åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰

### ãƒ—ãƒ­ã‚»ã‚¹

- ãƒ—ãƒ­ã‚»ã‚¹ã®è¡¨ç¤º

```Docker
ps
```

- ãƒ—ãƒ­ã‚»ã‚¹ã‚’ BG ã§èµ·å‹•

```Docker
(ã‚³ãƒãƒ³ãƒ‰) &
```

- ãƒ—ãƒ­ã‚»ã‚¹ã‚’ãƒ•ã‚©ã‚¢ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã«æˆ»ã™

```Docker
fg
```

### ã‚³ãƒãƒ³ãƒ‰

- ã‚³ãƒãƒ³ãƒ‰ã®ãƒ˜ãƒ«ãƒ—

```Docker
--help
```

â†’ ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ã®ä½¿ã„æ–¹ã‚’çŸ¥ã‚ŠãŸã„å ´åˆã‚„ã€ã‚³ãƒãƒ³ãƒ‰ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å ´æ‰€ã‚’è¡¨ç¤º

- ã‚³ãƒãƒ³ãƒ‰ã®ä¿å­˜å…ˆã‚’è¡¨ç¤º

```Docker
which ps
```

- ã‚³ãƒãƒ³ãƒ‰ã®ãƒãƒ‹ãƒ¥ã‚¢ãƒ«

```Docker
man
```

### ã‚µãƒ¼ãƒ

- ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã‚’æ¢ã™ï¼šfind

```Docker
find / -type d -name nginx
```

- æ–‡å­—ã‚’æ¤œç´¢ï¼šgrep

```Docker
grep "Hello" test.txt -n
```

- ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼åã‚’æ¢ã—ã€ãã®ä¸­ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–‡å­—æ¤œç´¢

```Docker
find / -type d -name nginx | xargs grep -r html
```

## Docker ä¸€é€£ã®ä½œæ¥­ãƒ•ãƒ­ãƒ¼ã¯ï¼Ÿ

ç°¡å˜ã«ã„ã†ã¨
ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã€ãƒ‰ãƒƒã‚«ãƒ¼ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦ãƒªãƒã‚¸ãƒˆãƒªã«ãƒ—ãƒƒã‚·ãƒ¥ã—ã€æœ¬ç•ªç’°å¢ƒã§ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã™ã‚‹
ã¨ã„ã†ã‚‚ã®ã€‚

## Docker ã‚³ãƒãƒ³ãƒ‰ï¼ˆåŸºæœ¬ã®å®Ÿè·µï¼‰

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã€public/private ã® DockerRepositry ã‹ã‚‰ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹

```Docker
docker pull IMAGE_NAME
```

Docker Hub ã‚„ Docker Registryï¼šGitHub ã® Docker ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚ˆã†ãªã‚‚ã®ã€‚ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å–å¾—ã§ãã‚‹ã€‚

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ docker ps ã®çµæœã‚’ç¢ºèªã§ãã‚‹

```Docker
watch -t "docker ps"
```

- Nginx ãƒ‰ãƒƒã‚«ãƒ¼ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å–å¾—

```Docker
docker pull nginx
```

- Nginx ã‚µãƒ¼ãƒãƒ¼ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•

```Docker
docker run -p 80:80 nginx
```

-p ã¯--publish ã®ç•¥ã€‚ãƒ›ã‚¹ãƒˆå´ã®ãƒãƒ¼ãƒˆç•ªå·ã‚’ 80 ã«ã—ã¦ã€ã‚³ãƒ³ãƒ†ãƒŠå´ã®ãƒãƒ¼ãƒˆç•ªå·ã‚‚ 80 ã«ã™ã‚‹ã€‚ãƒ›ã‚¹ãƒˆã¨ã‚³ãƒ³ãƒ†ãƒŠã®ãƒãƒ¼ãƒˆã‚’ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹ã€‚
â€»ã‚³ãƒ³ãƒ†ãƒŠã«ç¹‹ã’ã‚‹ãƒ›ã‚¹ãƒˆå´ã®ãƒãƒ¼ãƒˆã‚’å¤‰ãˆã‚‹ã“ã¨ã‚‚å¯èƒ½
docker run -p 8080:80 -d nginx

- èµ·å‹•ä¸­ã®ã‚³ãƒ³ãƒ†ãƒŠä¸€è¦§ã‚’è¡¨ç¤º

```Docker
docker ps
```

- ã‚³ãƒ³ãƒ†ãƒŠã‚’åœæ­¢ã™ã‚‹

```Docker
docker stop CONTAINER_ID
```

- åœæ­¢ä¸­ã®ã‚³ãƒ³ãƒ†ãƒŠã‚‚å…¨ã¦ä¸€è¦§è¡¨ç¤º

```Docker
docker ps --all
```

- æ­¢ã¾ã£ãŸã‚³ãƒ³ãƒ†ãƒŠã‚’å‰Šé™¤

```Docker
docker rm CONTAINER_ID
```

- ã‚³ãƒ³ãƒ†ãƒŠã‚’ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§èµ·å‹•

```Docker
docker run -p 80:80 --detach --name nginx nginx
```

â€»tty ã‚’ã‚¢ã‚¿ãƒƒãƒã™ã‚‹ï¼šãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‹ã‚‰ãƒ•ã‚©ã‚¢ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã«ç¹‹ã’ã‚‹
â€»ãƒ‡ã‚£ã‚¿ãƒƒãƒï¼šãƒ•ã‚©ã‚¢ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‹ã‚‰ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã«ç¹‹ã’ã‚‹

- ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ­ã‚°ã‚’è¡¨ç¤º

```Docker
docker logs CONTAINER_ID
```

## Docker ã‚³ãƒãƒ³ãƒ‰ï¼ˆä¸Šç´šç·¨ï¼‰

- ä½œå‹•ä¸­ã®ã‚³ãƒ³ãƒ†ãƒŠã®ä¸­ã«ã‚·ã‚§ãƒ«ã§å…¥ã‚‹

```Docker
docker exec -it CONTAINER_ID bash
```

-it ã¯--interactive ã¨--tty ã‚’ç¹‹ã’ãŸã‚‚ã®ã€‚ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã«ã„ã‚‹ã‚³ãƒ³ãƒ†ãƒŠã‚’ã€tty ã‚’ã‚¢ã‚¿ãƒƒãƒã—ã¦ã‚·ã‚§ãƒ«ã«æ¥ç¶šã™ã‚‹ã“ã¨ã§ã‚¤ãƒ³ãƒ—ãƒƒãƒˆ/ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã‚’è¦‹ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

- ã‚³ãƒ³ãƒ†ãƒŠã«ãƒ›ã‚¹ãƒˆã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼

```Docker
docker run -d --volume $(pwd):/home nginx
```

ã‚³ãƒ­ãƒ³ã®å·¦å´ãŒãƒ›ã‚¹ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã€‚å³å´ãŒã‚³ãƒ³ãƒ†ãƒŠã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã€‚ãƒ›ã‚¹ãƒˆä¸Šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ã‚³ãƒ³ãƒ†ãƒŠä¸Šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚¢ã‚¿ãƒƒãƒã‚’ã™ã‚‹ã€‚
-d ã¯--detach ã®ç•¥ã§ã€ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§èµ·å‹•ã™ã‚‹ã®æ„å‘³ã€‚
å®Ÿéš›ã¯ã‚³ãƒ³ãƒ†ãƒŠä¸Šã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªãã€ãƒ›ã‚¹ãƒˆã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ Volume ã¯ã‚³ãƒ³ãƒ†ãƒŠä¸Šã«ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã¦ã„ã‚‹ã®ã¿ã€‚

- ã‚³ãƒ³ãƒ†ãƒŠã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã™ã‚‹

```Docker
docker run -d --env TEST_ENV=hellow_world nginx
```

- ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã¦ã¿ã‚‹

```Docker
docker inspect CONTAINER_ID
```

- Nginx ã® Config ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã¤ã‘ã‚‹

```Docker
find / -type d -name nginx | xargs grep -r html

cat /usr/share/nginx/html/index.html
echo "Hello World" > /usr/share/nginx/html/index.html
```

ã‚³ãƒ³ãƒ†ãƒŠå†…ã«ã‚ã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® HTML ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€ãƒ›ã‚¹ãƒˆä¸Šã® html ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ Volume ãƒã‚¦ãƒ³ãƒˆã—ã¦ä¸Šæ›¸ã

```Docker
touch index.html && echo "hello world" > index.html
docker run -d -v "$(pwd)":/usr/share/nginx/html -p 80:80 --rm --name nginx nginx
```

â€»--rmï¼šã‚³ãƒ³ãƒ†ãƒŠçµ‚äº†æ™‚ã«ã‚³ãƒ³ãƒ†ãƒŠã‚’è‡ªå‹•çš„ã«å‰Šé™¤
